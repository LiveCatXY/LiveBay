---
import type { CollectionEntry } from "astro:content";
import Article from "@/cards/article-card.astro";
import BaseHead from "@/components/BaseHead.astro";
import Footer from "@/components/Footer.astro";
import Header from "@/components/Header.astro";

interface Props {
  slug: string;
  collection: string;
  data: CollectionEntry<"xyy">["data"];
}

const { slug, collection, data } = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead title={data.title} description={data.description || data.title} />
    <script>
      window.op = window.op||function(...args){(window.op.q=window.op.q||[]).push(args);};
      window.op('init', {
        clientId: 'c02507eb-c8fd-44b4-9b64-d1cdae7da9e7',
        trackScreenViews: true,
        trackOutgoingLinks: true,
        trackAttributes: true,
      });
    </script>
    <script src="https://openpanel.dev/op1.js" defer async></script>
  </head>

  <body>
    <Header />
    <main>
      <Article data={data}>
        <slot />
      </Article>
      <a
        href={`https://github.com/andyluss/lushisang.com/edit/main/src/content/${collection}/${slug}.md`}
        class="text-sm underline"
      >
        编辑
      </a>
    </main>
    <Footer />
  </body>
</html>
