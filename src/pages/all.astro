---
import { type CollectionEntry, type AnyEntryMap } from "astro:content";

import Article from "@/cards/article-card.astro";
import BaseHead from "@/components/BaseHead.astro";
import Footer from "@/components/Footer.astro";
import Header from "@/components/Header.astro";

import { getPosts } from "../utils/content";

export type Collection = keyof AnyEntryMap;
export type Post = CollectionEntry<Collection>;

const posts: Post[] = await getPosts('do');

const contents = [];
for (let post of posts){
  const { Content } = await post.render();
  contents.push(Content);
}
const Content = contents[0];
const data = posts[0].data;
---

<html lang="en">
  <head>
    <BaseHead title={data.title} description={data.description || data.title} />
  </head>

  <body>
    <Header />
    <main>{contents.map(Content => <Article data={data}><Content/></Article>)}</main>
    <Footer />
  </body>
</html>
