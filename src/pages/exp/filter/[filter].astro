---
import { getAll } from "../../../utils/content";
import IndexLayout from "../../../layouts/IndexLayout.astro";

export async function getStaticPaths() {
  const { tags, levels } = await getAll("exp");
  return levels
    .map((level) =>
      tags.map((tag) => ({ params: { filter: `${level[0]}-${tag[0]}` } })),
    )
    .flat();
}

const { filter } = Astro.params;
const [levelStr, tag] = filter.split("-");
const level = levelStr === "all" ? "all" : Number(levelStr);
---

<IndexLayout collection="exp" {tag} {level} />
